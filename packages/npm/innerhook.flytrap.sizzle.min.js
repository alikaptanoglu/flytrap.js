(function() {var define;function FlytrapHook(e,t){if(!e)throw"window must be passed to Fork constructor as first parameter";if(!t)throw"destination origin (e.g., https://app.flytrap.io/) must be passed to Fork constructor as second parameter";this.window=e,this.allowOrigin=t}(function(){function e(){this.ordinal=0}DependencyTypes={Regular:0,Anti:1,SkipIfExists:2,SkipIfNotExists:3,Parameter:4};var t=function(e){this.type=e};(function(){this.isRegular=function(){return this.type===DependencyTypes.Regular},this.isAnti=function(){return this.type===DependencyTypes.Anti},this.isParameter=function(){return this.type===DependencyTypes.Parameter},this.isSkipIfExists=function(){return this.type===DependencyTypes.SkipIfExists},this.isSkipIfNotExists=function(){return this.type===DependencyTypes.SkipIfNotExists}}).call(t.prototype),t.deduce=function(e){if("string"==typeof e)return DependencyTypes.Regular;var t={_anti_:DependencyTypes.Anti,_antidependency_:DependencyTypes.Anti,_parameter_:DependencyTypes.Parameter,_optional_:DependencyTypes.Optional,_skipIfExists_:DependencyTypes.SkipIfExists,_skipIfNotExists_:DependencyTypes.SkipIfNotExists},n=Object.getOwnPropertyNames(e);return 1===n.length?t[n[0]]||DependencyTypes.Regular:DependencyTypes.Regular};var n=function(e,n){this.type=new t(n||t.deduce(e)),this.isFulfilled=!1;var i;this.selector=e._parameter_!==i?e._parameter_:e._anti_||e._antidependency_||e._optional_||e._skipIfExists_||e._skipIfNotExists_||e};(function(){this.attemptToFulfill=function(){if(this.isFulfilled)return!1;var e=n._query(this.selector,!0);return this.type.isRegular()&&e.length>0||this.type.isAnti()&&0==e.length||this.type.isParameter()?(this.isFulfilled=!0,!0):!1},this.getDependencyValue=function(){return this.type.isParameter()?this.selector:n._query(this.selector)},this.isSkippable=function(){var e=n._query(this.selector);return this.type.isSkipIfExists()&&e.length>0||this.type.isSkipIfNotExists()&&0==e.length},this.reset=function(){this.isFulfilled=!1}}).call(n.prototype),n.setDOMContext=function(e){n.DOMContext=e},n.getElements=function(e){return e.map(function(e){return n._query(e)})},n._query=function(e,t){var i="undefined"!=typeof Sizzle;try{var r=i?Sizzle(e,n.DOMContext):document.querySelectorAll(e)}catch(s){t&&console.error(i?s.toString():"selector "+e+" is invalid.  Consider including a reference to Sizzle.js.")}return r||[]};var i=function(){this.dependencies=[]};(function(){this.addDependency=function(e,t){this.dependencies.push(new n(e,t))},this.dependenciesAreFulfilled=function(){for(var e=0;e<this.dependencies.length;++e)if(!this.dependencies[e].attemptToFulfill()&&!this.dependencies[e].isFulfilled)return!1;return!0},this.attemptToFulfillDependencies=function(e){for(var t=0;t<this.dependencies.length;++t)this.dependencies[t].attemptToFulfill()},this.reset=function(){for(var e=0;e<this.dependencies.length;++e)this.dependencies[e].reset()},this.shouldBeSkipped=function(){for(var e=0;e<this.dependencies.length;++e)if(this.dependencies[e].isSkippable())return!0;return!1},this.getDependencyValues=function(){for(var e=[],t=0;t<this.dependencies.length;++t)e.push(this.dependencies[t].getDependencyValue());return e},this.convertToDependencyValues=function(e){for(var t=[],i=0;i<e.length;++i)t.push(new n(e[i]).getDependencyValue());return t},this.query=function(e,t){return n._query(e,t)}}).call(i.prototype),i.setDOMContext=function(e){n.setDOMContext(e)},i.getElements=function(e){return n.getElements(e)};var r=function(e){this.totalExecutions=0,this.dependencyManager=new i,this.numFulfillAttempts=0,this.name=e.name||"",this.skipAfter=e.skipAfter||60,this.dependencies=[]||e.dependencies,this.callback=function(){},this.subcommands=[],this.afterDelay=e.runAfterDelay||1e3};(function(){this.click=function(e){this.withDependency(e);var t=new r({name:"Click "+e}).withDependency(e).withCallback(function(e){for(var t=0;t<e.length;++t){var n=document.createEvent("Event");n.initEvent("click",!0,!0),e[t].dispatchEvent(n)}});return this.subcommands.push(t),this},this.bubbleEvent=function(e,t){this.withDependency(e);var n=new r({name:"Bubble "+t+" "+e}).withDependency(e).withParameter(t).withCallback(function(e,t){for(var n=0;n<e.length;++n){var i=document.createEvent("Event");i.initEvent(t,!0,!0),e[n].dispatchEvent(i)}});return this.subcommands.push(n),this},this.hardClick=function(e){return this.bubbleEvent(e,"click")},this.uncheck=function(e){return this.check(e,!1)},this.check=function(e,t){this.withDependency(e),null==t&&(t=!0);var n=new r({name:(t?"Checking ":"Unchecking ")+e}).withDependency(e).withParameter(t).withCallback(function(e,t){for(var n=0;n<e.length;++n)e[n].checked=t});return this.subcommands.push(n),this},this.value=function(e,t){this.withDependency(e),null==t&&(t=!0);var n=new r({name:"Setting value of "+e+" to "+t}).withDependency(e).withParameter(t).withCallback(function(e,t){for(var n=0;n<e.length;++n)e[n].value=t.selector||t});return this.subcommands.push(n),this},this.hash=function(e){var t=new r({name:"Setting window.location.hash: "+e}).withParameter(e).withCallback(function(e){window.location.hash=e});return this.subcommands.push(t),this},this.log=function(e){var t=new r({name:"Logging message: "+e}).withParameter(e).withCallback(function(e){console.log(e)});return this.subcommands.push(t),this},this.focus=function(e){this.withDependency(e);var t=new r({name:"Focus on "+e}).withDependency(e).withCallback(function(e){for(var t=0;t<e.length;++t)e[t].focus()});return this.subcommands.push(t),this},this["goto"]=function(e){var t=new r({name:"Changing URL to "+e}).withParameter(e).withCallback(function(e){window.location.href=e});return this.subcommands.push(t),this},this.autocomplete=function(e,t,n){this.withDependency(e),this.withDependency(e+"_value");var i=new r({name:"Autocomplete "+e}).withDependency(e).withDependency(e+"_value").withParameter(t).withParameter(n).withCallback(function(e,t,n,i){e.val(i+" - "+n),t.val(i);var r=document.createEvent("HTMLEvents");r.initEvent("change",!1,!0),t[0].dispatchEvent(r)});return this.subcommands.push(i),this},this.antidependency=function(e){return this.withDependency({_anti_:e})},this.dependency=this.withDependency=function(e,t){return this.dependencyManager.addDependency(e,t),this},this.parameter=this.withParameter=function(e){return this.withDependency({_parameter_:e}),this},this.run=function(e,t){for(var n=new r({name:"Subcommand callback"}),i=0;i<e.length;++i)void 0!==e[i]._parameter_?n.withParameter(e[i]._parameter_):(this.withDependency(e[i]),n.withDependency(e[i]));return n.withCallback(t),this.subcommands.push(n),this},this.each=this.eachWithDependencyCheck=function(e,t){var n=new r({name:"Subcommand each w/ dep check"}).withParameter(e).withParameter(t).withCallback(function(e,t){for(var n=0;n<e.length;++n)t(e[n],n)});return this.subcommands.push(n),this},this.withCallback=function(e){return this.callback=e,this},this.skipAfterAttempts=function(e){return this.skipAfter=e,this},this.attemptToFulfillDependencies=function(){this.dependencyManager.attemptToFulfillDependencies(),++this.numFulfillAttempts},this.dependenciesAreFulfilled=function(){return this.dependencyManager.dependenciesAreFulfilled()},this.shouldBeSkipped=function(){return this.numFulfillAttempts>this.skipAfter?!0:this.dependencyManager.shouldBeSkipped()},this.afterSeconds=function(e){return this.runAfterDelay(1e3*e)},this.runAfterDelay=function(e){return this.afterDelay=e,this},this.exists=function(e){return this.withParameter(e).withCallback(function(e){return this.dependencyManager.query(e,!0).length>0})},this.execute=function(){for(var e=0;e<this.subcommands.length;++e)this.subcommands[e].execute();var t=this.dependencyManager.getDependencyValues();t.push(this.totalExecutions++);var n=this.callback.apply(this,t);return n},this.reset=function(){numFulfilledAttempts=0,this.dependencyManager.reset();for(var e=0;e<this.subcommands.length;++e)this.subcommands[e].reset()}}).call(r.prototype);var s=function(e,t){var n;this.interval=e,this.callback=t,this.start=function(){this.stop(),n=setTimeout(this.callback,this.interval)},this.stop=function(){clearTimeout(n)}};LocalStoragePersister={};var o="_flytrapP_",a={currentWorkflow:o+"CurrentWorkflow",currentCode:o+"CurrentCode"};if(LocalStoragePersister.getCurrentWorkflow=function(){return sessionStorage.getItem(a.currentWorkflow)},LocalStoragePersister.setCurrentWorkflow=function(e){sessionStorage.setItem(a.currentWorkflow,e)},LocalStoragePersister.persistNodeControlFlowInfo=function(e){var t=e.nodeId,n=JSON.stringify(e.nodeInfo);sessionStorage.setItem(o+t,n)},LocalStoragePersister.getNodeControlFlowInfo=function(e){var t=sessionStorage.getItem(o+e);return JSON.parse(t)},LocalStoragePersister.setCurrentWorkflowCode=function(e){sessionStorage.setItem(a.currentCode,e)},LocalStoragePersister.getCurrentWorkflowCode=function(){return sessionStorage.getItem(a.currentCode)},LocalStoragePersister.clearKeys=function(){for(var e in sessionStorage)sessionStorage.hasOwnProperty(e)&&0===e.indexOf(o)&&sessionStorage.removeItem(e)},"undefined"==typeof Storage)throw"no local storage support";var l=function(e){this.commands=e.commands||[],this.workflowName=e.workflowName,this.defaultSkipAfter=e.defaultSkipAfter||1e3,this.timeInterval=e.timeInterval||1e3,this.dependencyManager=e.dependencyManager,this.persister=e.persister||LocalStoragePersister,this.delegate=e.delegate||{commandDidComplete:function(){},workflowDidComplete:function(){},checkpointWasReached:function(){},assertionDidComplete:function(){},commandMayExecute:function(){}},this.go=function(e){e=e||this.timeInterval;var t=i();t&&h({nodeDesc:t.getModifiersPretty(),inMs:e,selectors:t.getSelectors()}),n.interval=e,LocalStoragePersister.setCurrentWorkflow(this.workflowName),n.start()},this.stop=function(){LocalStoragePersister.setCurrentWorkflow(""),p.reset(),c({name:this.workflowName}),n.stop(),console.log("All done!")};var t=function(){if(this.dependencyManager.dependenciesAreFulfilled()){var e=i();if(!e)return this.persister.clearKeys(),this.stop();var t=this.persister.getNodeControlFlowInfo(e.nodeId);if(e.setControlFlowInfo(t),a(e))return e.didExecute(),void(i()?(o(),this.go()):(this.persister.clearKeys(),this.stop()));var n=e.getCommand();if(!n)return void this.stop();if(n.attemptToFulfillDependencies(),e.numberOfDependencyFulfillmentAttempts++,n.shouldBeSkipped())console.log("[Skipping] "+e.nodeId+" "+n.name+" ... "),e.didExecute(),l(n,e.getControlFlowInfo(),"skipped");else if(n.dependenciesAreFulfilled()){if(console.log(e.nodeId+" "+n.name+" ... "),n.execute(),e.didExecute(),l(n,e.getControlFlowInfo(),"executed"),!i())return this.persister.clearKeys(),void this.stop();o(),this.dependencyManager.reset()}else l(n,e.getControlFlowInfo(),"spinning")}this.go()}.bind(this),n=new s(this.timeInterval,t),i=function(){return r(this.commands)}.bind(this),r=function(e){if(e.shouldExecute())return e;if(!e.shouldEnterBlock())return null;for(var t=0;t<e.children.length;++t){var n=r(e.children[t]);if(n)return n}return null}.bind(this),o=function(){var e=i();this.timeInterval=e.getAfterDelay()||this.timeInterval}.bind(this),a=function(e){switch(e.type){case"assert":return d(e.getAssertionResult()),!0;case"checkpoint":return u(e.getCheckpointDescription()),!0;default:return!1}}.bind(this),l=function(e,t,n){var i={status:n,command:{workflowName:this.workflowName,commandDesc:(e.subcommands[0]||e).name},nodeInfo:t};f(this.delegate.commandDidComplete,i)}.bind(this),c=function(e){f(this.delegate.workflowDidComplete,e)}.bind(this),u=function(e){f(this.delegate.checkpointWasReached,e)}.bind(this),h=function(e){f(this.delegate.commandMayExecute,e)}.bind(this),d=function(e){f(this.delegate.assertionDidComplete,e)}.bind(this),f=function(e,t){null!=e&&setTimeout(function(){e(t)},0)}.bind(this)};window.confirm=function(e){return console.log("Answering YES to: "+e),!0};var c=function(e){if(null==e||null==e.name)throw"A workflow name is required.";if(this.commands=[],this.dependencyManager=new i,this.name=e.name,this["do"]=this.perform=this.addCommand=function(e){var t=new r({name:e});return this.commands.push(t),t},this.withDependency=function(e,t){return this.dependencyManager.addDependency(e,t),this},this.workflowExecutor=null,this.go=function(){this.workflowExecutor=new l({commands:this.annotatedCommands,dependencyManager:this.dependencyManager,workflowName:this.name,delegate:this.delegate}),this.workflowExecutor.go()},this.antidependency=this.withAntidependency=function(e){return this.withDependency({_anti_:e})},this.withCommandTree=function(e){for(var t=0;t<e.modifiers.length;++t)for(var n=0;n<e.modifiers[t].operands.length;++n){var i=e.evaluateExpression(e.modifiers[t].operands[n]);this[e.modifiers[t].type](i)}return this.annotatedCommands=e,this},this.delegate={},this.delegate.commandMayExecute=function(t){var n=i.getElements(t.selectors);n.forEach(function(e){for(var t=0,n=e.length;n>t;++t)e[t].classList.add("flytrap-active-command")}),e.commandMayExecute&&e.commandMayExecute(t)},this.delegate.commandDidComplete=function(t){if("spinning"!==t.status)for(var n=document.getElementsByClassName("flytrap-active-command"),i=n.length-1;i>=0;--i)n[i].classList.remove("flytrap-active-command");e.commandDidComplete&&e.commandDidComplete(t)},this.delegate.workflowDidComplete=e.workflowDidComplete,this.delegate.checkpointWasReached=e.checkpointWasReached,this.delegate.assertionDidComplete=e.assertionDidComplete,null!=e.code){i.setDOMContext(e.DOMContext);var t=C.parse(e.code);C.attachModules(t,function(e){var t=C.buildTree(e);this.withCommandTree(t)}.bind(this))}};c.ExtractModuleReferences=function(e){function t(e,n){if(e&&e.length)for(var i=0,r=e.length;r>i;++i){var s=e[i];"module"===s.type&&s.module.name.expr_str&&n.push(s.module.name.expr_str),t(s.statement_list,n)}}var n=[],i=C.parse(e);return t(i.flytrap.statement_list,n),n};var u={},h=function(e){this.type=e.type,this.operands=e.operands},p=function(){return this.prototype.newId=function(){return this.ordinal++},this.prototype.reset=function(){this.ordinal=0},new this}.call(e),d=function(){function e(){this.yy={}}var t=function(e,t,n,i){for(n=n||{},i=e.length;i--;n[e[i]]=t);return n},n=[1,12],i=[1,13],r=[1,14],s=[1,19],o=[1,20],a=[1,21],l=[1,22],c=[1,23],u=[1,24],h=[1,25],p=[1,26],d=[1,15],f=[1,18],m=[1,16],y=[1,17],g=[1,36],v=[1,32],b=[1,33],w=[1,35],E=[6,20,23,24,29,31,32,33,34,36,37,38,53,55,60,64,67],_=[1,45],x=[1,44],k=[1,46],C=[1,47],S=[1,48],I=[1,51],D=[20,23,24,29,31,32,33,34,36,37,38,53,55,60,67],T=[1,68],A=[6,17,20,22,23,24,29,31,32,33,34,35,36,37,38,39,42,43,45,53,55,58,59,60,63,64,67],N=[6,17,20,22,23,24,29,30,31,32,33,34,35,36,37,38,39,42,43,45,53,55,58,59,60,63,64,67,70,74,77],F=[1,74],O=[6,17,20,22,23,24,29,30,31,32,33,34,35,36,37,38,39,42,43,45,53,55,58,59,60,63,64,67,70,74,77,86],P=[17,22,29,31,32,33,34,36,37,38,39,42,43,45],L=[1,91],R=[1,90],$=[1,89],M=[1,95],B=[6,17,20,22,23,24,29,31,32,33,34,36,37,38,39,42,43,45,53,55,60,64,67],q=[1,97],V=[6,17,20,22,23,24,29,30,31,32,33,34,36,37,38,39,42,43,45,53,55,60,63,64,67,70,74],H=[17,20,23,24,29,31,32,33,34,36,37,38,53,55,60,67],j=[6,17,20,22,23,24,29,31,32,33,34,35,36,37,38,39,42,43,45,53,55,58,59,60,63,64,67,70,77],z=[70,77],G=[17,42,63],U=[6,20,23,24,29,31,32,33,34,36,37,38,53,55,58,60,64,67],W=[6,17,20,22,23,24,29,30,31,32,33,34,35,36,37,38,39,42,43,45,53,55,58,59,60,63,64,67,70,74,77,84,86],K={trace:function(){},yy:{},symbols_:{error:2,flytrap_script:3,flytrap_decl:4,stmt_list:5,EOF:6,stmt:7,flytrap_command_decl:8,assignment:9,conditional_stmt:10,each_block:11,execute_stmt:12,FLYTRAP:13,expression:14,flytrap_decl_options:15,flytrap_decl_option:16,ANTIDEPENDENCY:17,expression_list:18,subcommand:19,LEFT_PARENTHESES:20,command_modifiers:21,RIGHT_PARENTHESES:22,CHECKPOINT:23,ASSERT:24,comparable:25,EXISTS:26,command_modifier:27,command_option:28,CLICK:29,BANG:30,CHECK:31,HASH:32,VALUE:33,SET:34,TO:35,FOCUS:36,LOG:37,GOTO:38,AFTER:39,NUMBER:40,seconds:41,DEPENDENCY:42,SKIP:43,attempts:44,REPEAT:45,times:46,SECOND:47,SECONDS:48,TIME:49,TIMES:50,ATTEMPT:51,ATTEMPTS:52,VARIABLE:53,EQUALS:54,EXECUTE:55,with_list:56,"with":57,WITH:58,AS:59,IF:60,conditional_dependencies:61,conditional_block:62,BEGIN:63,END:64,ELSE:65,conditional_dependency:66,EACH:67,IN:68,composition:69,COMMA:70,json_blob:71,array:72,LEFT_BRACKET:73,RIGHT_BRACKET:74,LEFT_BRACE:75,obj_key_list:76,RIGHT_BRACE:77,obj_key:78,PROPERTY:79,COLON:80,concatenation:81,dot_notation:82,dot_list:83,DOT:84,composable:85,PLUS:86,STRING:87,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",13:"FLYTRAP",17:"ANTIDEPENDENCY",20:"LEFT_PARENTHESES",22:"RIGHT_PARENTHESES",23:"CHECKPOINT",24:"ASSERT",26:"EXISTS",29:"CLICK",30:"BANG",31:"CHECK",32:"HASH",33:"VALUE",34:"SET",35:"TO",36:"FOCUS",37:"LOG",38:"GOTO",39:"AFTER",40:"NUMBER",42:"DEPENDENCY",43:"SKIP",45:"REPEAT",47:"SECOND",48:"SECONDS",49:"TIME",50:"TIMES",51:"ATTEMPT",52:"ATTEMPTS",53:"VARIABLE",54:"EQUALS",55:"EXECUTE",58:"WITH",59:"AS",60:"IF",63:"BEGIN",64:"END",65:"ELSE",67:"EACH",68:"IN",70:"COMMA",73:"LEFT_BRACKET",74:"RIGHT_BRACKET",75:"LEFT_BRACE",77:"RIGHT_BRACE",79:"PROPERTY",80:"COLON",84:"DOT",86:"PLUS",87:"STRING"},productions_:[0,[3,3],[5,1],[5,2],[7,1],[7,1],[7,1],[7,1],[7,1],[4,2],[4,3],[15,1],[15,2],[16,2],[8,1],[8,3],[8,2],[8,2],[25,2],[21,1],[21,2],[27,1],[27,1],[19,2],[19,3],[19,2],[19,2],[19,2],[19,4],[19,2],[19,2],[19,2],[28,3],[28,2],[28,2],[28,4],[28,3],[41,1],[41,1],[46,1],[46,1],[44,1],[44,1],[9,3],[12,3],[12,2],[56,1],[56,2],[57,4],[10,4],[10,3],[62,3],[62,7],[61,1],[61,2],[66,2],[66,2],[11,7],[18,1],[18,3],[18,1],[18,3],[14,1],[14,1],[14,1],[72,3],[72,2],[71,3],[76,1],[76,3],[78,3],[78,3],[78,3],[69,1],[82,2],[83,2],[83,3],[81,1],[81,3],[85,1],[85,1],[85,1]],performAction:function(e,t,n,i,r,s,o){var a=s.length-1;switch(r){case 1:return this.$=s[a-2],this.$.flytrap.statement_list=s[a-1],this.$;case 2:case 11:case 19:case 46:case 53:case 58:case 60:case 75:case 77:this.$=[s[a]];break;case 3:this.$=s[a-1],this.$.push(s[a]);break;case 9:this.$={type:"flytrap",flytrap:{flytrap:s[a],options:[]}};break;case 10:this.$={type:"flytrap",flytrap:{flytrap:s[a-1],options:s[a]}};break;case 12:case 20:this.$=s[a-1],this.$.push(s[a]);break;case 13:case 33:this.$={type:"antidependency",operands:s[a]};break;case 14:this.$={type:"command",command:{command:s[a].type,modifiers:[s[a]]}};break;case 15:this.$={type:"command",command:{command:{type:"expr_str",expr_str:""},modifiers:s[a-1]}};break;case 16:this.$={type:"checkpoint",checkpoint:s[a]};break;case 17:this.$={type:"assert",assert:{comparable:s[a]}};break;case 18:this.$={type:"exists",exists:{operands:[s[a]]}};break;case 23:this.$={type:"click",operands:s[a]};break;case 24:this.$={type:"hardClick",operands:s[a-1]};break;case 25:this.$={type:"check",operands:s[a]};break;case 26:this.$={type:"hash",operands:s[a]};break;case 27:this.$={type:"value",operands:s[a]};break;case 28:this.$={type:"value",operands:[s[a-2],s[a]]};break;case 29:this.$={type:"focus",operands:s[a]};break;case 30:this.$={type:"log",operands:s[a]};break;case 31:this.$={type:"goto",operands:[s[a]]};break;case 32:this.$={type:"afterSeconds",operands:[s[a-1]]};break;case 34:case 55:this.$={type:"dependency",operands:s[a]};break;case 35:this.$={type:"skipAfterAttempts",operands:[s[a-1]]};break;case 36:this.$={type:"repeat",operands:[s[a-1]]};break;case 43:this.$={type:"assignment",assignment:{variable:s[a-2],value:s[a]}};break;case 44:this.$={type:"module",module:{name:s[a-1],inputs:s[a]}};break;case 45:this.$={type:"module",module:{name:s[a]}};break;case 47:this.$=s[a-1],this.$.push(s[a]);break;case 48:this.$={variable:s[a],value:s[a-2]};break;case 49:this.$={type:"if","if":{comparable:s[a-2],then_statements:s[a].then_statements,else_statements:s[a].else_statements,modifiers:s[a-1]}};break;case 50:this.$={type:"if","if":{comparable:s[a-1],then_statements:s[a].then_statements,else_statements:s[a].else_statements}};break;case 51:this.$={then_statements:s[a-1]};break;case 52:this.$={then_statements:s[a-5],else_statements:s[a-1]};break;case 54:this.$=s[a-1],this.$.push(s[a]);break;case 56:this.$={type:"antidependency",operands:s[a]};break;case 57:this.$={type:"each",each:{iterator_var_name:s[a-5],iterator_expr:s[a-3],statement_list:s[a-1]}};break;case 59:case 61:case 69:case 76:case 78:this.$=s[a-2],this.$.push(s[a]);break;case 65:this.$={type:"expr_arr",expr_arr:s[a-1]};break;case 66:this.$={type:"expr_arr",expr_arr:[]};break;case 67:this.$={type:"expr_obj",expr_obj:{props:s[a-1]}};break;case 68:this.$=[s[a]];break;case 70:case 71:case 72:this.$={key:{type:"expr_str",expr_str:s[a-2]},value:s[a]};break;case 73:this.$=1==s[a].length?s[a][0]:{type:"expr_concat",expr_concat:s[a]};break;case 74:this.$={keys:s[a],source:{type:"expr_var",expr_var:{variableName:s[a-1]}}};break;case 79:var l="''"==s[a]?"":s[a].substring(1,this.$.length-1).replace(/\'\'/g,"'");this.$={type:"expr_str",expr_str:l};break;case 80:this.$={type:"expr_var",expr_var:{variableName:s[a]}};break;case 81:this.$=1==s[a].length?s[a][0]:{type:"expr_dot",expr_dot:s[a]}}},table:[{3:1,4:2,13:[1,3]},{1:[3]},{5:4,7:5,8:6,9:7,10:8,11:9,12:10,19:11,20:n,23:i,24:r,29:s,31:o,32:a,33:l,34:c,36:u,37:h,38:p,53:d,55:f,60:m,67:y},{14:27,53:g,69:28,71:30,72:29,73:v,75:b,81:31,82:37,85:34,87:w},{6:[1,38],7:39,8:6,9:7,10:8,11:9,12:10,19:11,20:n,23:i,24:r,29:s,31:o,32:a,33:l,34:c,36:u,37:h,38:p,53:d,55:f,60:m,67:y},t(E,[2,2]),t(E,[2,4]),t(E,[2,5]),t(E,[2,6]),t(E,[2,7]),t(E,[2,8]),t(E,[2,14]),{17:_,19:42,21:40,27:41,28:43,29:s,31:o,32:a,33:l,34:c,36:u,37:h,38:p,39:x,42:k,43:C,45:S},{14:49,53:g,69:28,71:30,72:29,73:v,75:b,81:31,82:37,85:34,87:w},{25:50,26:I},{54:[1,52]},{25:53,26:I},{53:[1,54]},{14:55,53:g,69:28,71:30,72:29,73:v,75:b,81:31,82:37,85:34,87:w},{18:56,53:g,69:57,71:58,75:b,81:31,82:37,85:34,87:w},{18:59,53:g,69:57,71:58,75:b,81:31,82:37,85:34,87:w},{18:60,53:g,69:57,71:58,75:b,81:31,82:37,85:34,87:w},{18:61,53:g,69:57,71:58,75:b,81:31,82:37,85:34,87:w},{14:62,53:g,69:28,71:30,72:29,73:v,75:b,81:31,82:37,85:34,87:w},{18:63,53:g,69:57,71:58,75:b,81:31,82:37,85:34,87:w},{18:64,53:g,69:57,71:58,75:b,81:31,82:37,85:34,87:w},{14:65,53:g,69:28,71:30,72:29,73:v,75:b,81:31,82:37,85:34,87:w},t(D,[2,9],{15:66,16:67,17:T}),t(A,[2,62]),t(A,[2,63]),t(A,[2,64]),t(N,[2,73],{86:[1,69]}),{18:70,53:g,69:57,71:58,74:[1,71],75:b,81:31,82:37,85:34,87:w},{76:72,78:73,79:F},t(O,[2,77]),t(O,[2,79]),t(O,[2,80],{83:75,84:[1,76]}),t(O,[2,81]),{1:[2,1]},t(E,[2,3]),{17:_,19:42,22:[1,77],27:78,28:43,29:s,31:o,32:a,33:l,34:c,36:u,37:h,38:p,39:x,42:k,43:C,45:S},t(P,[2,19]),t(P,[2,21]),t(P,[2,22]),{40:[1,79]},{18:80,53:g,69:57,71:58,75:b,81:31,82:37,85:34,87:w},{18:81,53:g,69:57,71:58,75:b,81:31,82:37,85:34,87:w},{39:[1,82]},{40:[1,83]},t(E,[2,16]),t(E,[2,17]),{14:84,53:g,69:28,71:30,72:29,73:v,75:b,81:31,82:37,85:34,87:w},{14:85,53:g,69:28,71:30,72:29,73:v,75:b,81:31,82:37,85:34,87:w},{17:L,42:R,61:86,62:87,63:$,66:88},{68:[1,92]},t(E,[2,45],{56:93,57:94,58:M}),t(B,[2,23],{30:[1,96],70:q}),t(V,[2,58]),t(V,[2,60]),t(B,[2,25],{70:q}),t(B,[2,26],{70:q}),t(B,[2,27],{70:q}),{35:[1,98]},t(B,[2,29],{70:q}),t(B,[2,30],{70:q}),t(B,[2,31]),t(D,[2,10],{16:99,17:T}),t(H,[2,11]),{18:100,53:g,69:57,71:58,75:b,81:31,82:37,85:34,87:w},{53:g,82:37,85:101,87:w},{70:q,74:[1,102]},t(j,[2,66]),{70:[1,104],77:[1,103]},t(z,[2,68]),{80:[1,105]},t(O,[2,74],{84:[1,106]}),{79:[1,107]},t(E,[2,15]),t(P,[2,20]),{41:108,47:[1,109],48:[1,110]},t(P,[2,33],{70:q}),t(P,[2,34],{70:q}),{40:[1,111]},{46:112,49:[1,113],50:[1,114]},t([6,17,20,23,24,29,31,32,33,34,36,37,38,42,53,55,60,63,64,67],[2,18]),t(E,[2,43]),{17:L,42:R,62:115,63:$,66:116},t(E,[2,50]),t(G,[2,53]),{5:117,7:5,8:6,9:7,10:8,11:9,12:10,19:11,20:n,23:i,24:r,29:s,31:o,32:a,33:l,34:c,36:u,37:h,38:p,53:d,55:f,60:m,67:y},{18:118,53:g,69:57,71:58,75:b,81:31,82:37,85:34,87:w},{18:119,53:g,69:57,71:58,75:b,81:31,82:37,85:34,87:w},{14:120,53:g,69:28,71:30,72:29,73:v,75:b,81:31,82:37,85:34,87:w},t(E,[2,44],{57:121,58:M}),t(U,[2,46]),{14:122,53:g,69:28,71:30,72:29,73:v,75:b,81:31,82:37,85:34,87:w},t(B,[2,24]),{53:g,69:123,71:124,75:b,81:31,82:37,85:34,87:w},{14:125,53:g,69:28,71:30,72:29,73:v,75:b,81:31,82:37,85:34,87:w},t(H,[2,12]),t(H,[2,13],{70:q}),t(O,[2,78]),t(j,[2,65]),t(N,[2,67]),{78:126,79:F},{53:g,69:127,71:128,72:129,73:v,75:b,81:31,82:37,85:34,87:w},{79:[1,130]},t(W,[2,75]),t(P,[2,32]),t(P,[2,37]),t(P,[2,38]),{44:131,51:[1,132],52:[1,133]},t(P,[2,36]),t(P,[2,39]),t(P,[2,40]),t(E,[2,49]),t(G,[2,54]),{7:39,8:6,9:7,10:8,11:9,12:10,19:11,20:n,23:i,24:r,29:s,31:o,32:a,33:l,34:c,36:u,37:h,38:p,53:d,55:f,60:m,64:[1,134],67:y},t(G,[2,55],{70:q}),t(G,[2,56],{70:q}),{63:[1,135]},t(U,[2,47]),{59:[1,136]},t(V,[2,59]),t(V,[2,61]),t(B,[2,28]),t(z,[2,69]),t(z,[2,70]),t(z,[2,71]),t(z,[2,72]),t(W,[2,76]),t(P,[2,35]),t(P,[2,41]),t(P,[2,42]),t(E,[2,51],{65:[1,137]}),{5:138,7:5,8:6,9:7,10:8,11:9,12:10,19:11,20:n,23:i,24:r,29:s,31:o,32:a,33:l,34:c,36:u,37:h,38:p,53:d,55:f,60:m,67:y},{53:[1,139]},{63:[1,140]},{7:39,8:6,9:7,10:8,11:9,12:10,19:11,20:n,23:i,24:r,29:s,31:o,32:a,33:l,34:c,36:u,37:h,38:p,53:d,55:f,60:m,64:[1,141],67:y},t(U,[2,48]),{5:142,7:5,8:6,9:7,10:8,11:9,12:10,19:11,20:n,23:i,24:r,29:s,31:o,32:a,33:l,34:c,36:u,37:h,38:p,53:d,55:f,60:m,67:y},t(E,[2,57]),{7:39,8:6,9:7,10:8,11:9,12:10,19:11,20:n,23:i,24:r,29:s,31:o,32:a,33:l,34:c,36:u,37:h,38:p,53:d,55:f,60:m,64:[1,143],67:y},t(E,[2,52])],defaultActions:{38:[2,1]},parseError:function(e,t){if(!t.recoverable)throw new Error(e);this.trace(e)},parse:function(e){function t(){var e;return e=f.lex()||p,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],r=[null],s=[],o=this.table,a="",l=0,c=0,u=0,h=2,p=1,d=s.slice.call(arguments,1),f=Object.create(this.lexer),m={yy:{}};for(var y in this.yy)Object.prototype.hasOwnProperty.call(this.yy,y)&&(m.yy[y]=this.yy[y]);f.setInput(e,m.yy),m.yy.lexer=f,m.yy.parser=this,"undefined"==typeof f.yylloc&&(f.yylloc={});var g=f.yylloc;s.push(g);var v=f.options&&f.options.ranges;"function"==typeof m.yy.parseError?this.parseError=m.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var b,w,E,_,x,k,C,S,I,D={};;){if(E=i[i.length-1],this.defaultActions[E]?_=this.defaultActions[E]:((null===b||"undefined"==typeof b)&&(b=t()),_=o[E]&&o[E][b]),"undefined"==typeof _||!_.length||!_[0]){var T="";I=[];for(k in o[E])this.terminals_[k]&&k>h&&I.push("'"+this.terminals_[k]+"'");T=f.showPosition?"Parse error on line "+(l+1)+":\n"+f.showPosition()+"\nExpecting "+I.join(", ")+", got '"+(this.terminals_[b]||b)+"'":"Parse error on line "+(l+1)+": Unexpected "+(b==p?"end of input":"'"+(this.terminals_[b]||b)+"'"),this.parseError(T,{text:f.match,token:this.terminals_[b]||b,line:f.yylineno,loc:g,expected:I})}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+E+", token: "+b);switch(_[0]){case 1:i.push(b),r.push(f.yytext),s.push(f.yylloc),i.push(_[1]),b=null,w?(b=w,w=null):(c=f.yyleng,a=f.yytext,l=f.yylineno,g=f.yylloc,u>0&&u--);break;case 2:if(C=this.productions_[_[1]][1],D.$=r[r.length-C],D._$={first_line:s[s.length-(C||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(C||1)].first_column,last_column:s[s.length-1].last_column},v&&(D._$.range=[s[s.length-(C||1)].range[0],s[s.length-1].range[1]]),x=this.performAction.apply(D,[a,c,l,m.yy,_[1],r,s].concat(d)),"undefined"!=typeof x)return x;C&&(i=i.slice(0,-1*C*2),r=r.slice(0,-1*C),s=s.slice(0,-1*C)),i.push(this.productions_[_[1]][0]),r.push(D.$),s.push(D._$),S=o[i[i.length-2]][i[i.length-1]],i.push(S);break;case 3:return!0}}return!0}},Y=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var n,i,r;if(this.options.backtrack_lexer&&(r={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(r.yylloc.range=this.yylloc.range.slice(0))),i=e[0].match(/(?:\r\n?|\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var s in r)this[s]=r[s];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),s=0;s<r.length;s++)if(n=this._input.match(this.rules[r[s]]),n&&(!t||n[0].length>t[0].length)){if(t=n,i=s,this.options.backtrack_lexer){if(e=this.test_match(n,r[s]),e!==!1)return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?(e=this.test_match(t,r[i]),e!==!1?e:!1):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){var e=this.conditionStack.length-1;return e>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){
return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return e=this.conditionStack.length-1-Math.abs(e||0),e>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,n,i){switch(n){case 0:break;case 1:return 40;case 2:return 87;case 3:return 13;case 4:return 17;case 5:return 42;case 6:return"PERFORM";case 7:return 29;case 8:return 31;case 9:return 32;case 10:return 39;case 11:return 48;case 12:return 47;case 13:return 60;case 14:return 26;case 15:return 63;case 16:return 64;case 17:return 65;case 18:return 30;case 19:return 33;case 20:return 36;case 21:return 38;case 22:return 37;case 23:return 34;case 24:return 35;case 25:return 43;case 26:return 39;case 27:return 52;case 28:return 51;case 29:return 45;case 30:return 50;case 31:return 49;case 32:return"FOR";case 33:return 67;case 34:return 68;case 35:return 23;case 36:return 24;case 37:return 55;case 38:return 58;case 39:return 59;case 40:return 53;case 41:return 79;case 42:return 54;case 43:return 70;case 44:return 84;case 45:return 73;case 46:return 74;case 47:return 75;case 48:return 77;case 49:return 80;case 50:return 86;case 51:return 20;case 52:return 22;case 53:return 6}},rules:[/^(?:\s+)/,/^(?:[0-9]+(\.[0-9]+)?\b)/,/^(?:'(?:[^\']+|'')+'|'')/,/^(?:flytrap\b)/,/^(?:antidependency\b)/,/^(?:dependency\b)/,/^(?:perform\b)/,/^(?:click\b)/,/^(?:check\b)/,/^(?:hash\b)/,/^(?:after\b)/,/^(?:seconds\b)/,/^(?:second\b)/,/^(?:if\b)/,/^(?:exists\b)/,/^(?:begin\b)/,/^(?:end\b)/,/^(?:else\b)/,/^(?:!)/,/^(?:value\b)/,/^(?:focus\b)/,/^(?:goto\b)/,/^(?:log\b)/,/^(?:set\b)/,/^(?:to\b)/,/^(?:skip\b)/,/^(?:after\b)/,/^(?:attempts\b)/,/^(?:attempt\b)/,/^(?:repeat\b)/,/^(?:times\b)/,/^(?:time\b)/,/^(?:for\b)/,/^(?:each\b)/,/^(?:in\b)/,/^(?:checkpoint\b)/,/^(?:assert\b)/,/^(?:execute\b)/,/^(?:with\b)/,/^(?:as\b)/,/^(?:@[A-Za-z0-9_]+)/,/^(?:[A-Za-z0-9_]+)/,/^(?:=)/,/^(?:,)/,/^(?:\.)/,/^(?:\[)/,/^(?:\])/,/^(?:\{)/,/^(?:\})/,/^(?::)/,/^(?:\+)/,/^(?:\()/,/^(?:\))/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53],inclusive:!0}}};return e}();return K.lexer=Y,e.prototype=K,K.Parser=e,new e}();"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.parser=d,exports.Parser=d.Parser,exports.parse=function(){return d.parse.apply(d,arguments)},exports.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),process.exit(1));var t=require("fs").readFileSync(require("path").normalize(e[1]),"utf8");return exports.parser.parse(t)},"undefined"!=typeof module&&require.main===module&&exports.main(process.argv.slice(1)));var f=d,m=Object.create({parent:null,type:null,modifiers:[],variables:[],nodeId:0,children:[],numberOfDependencyFulfillmentAttempts:0,numberOfCompleteExecutions:0,newId:function(){this.nodeId=p.newId()},didExecute:function(){},shouldExecute:function(){return!1},childDidExecute:function(e){},shouldEnterBlock:function(){return!0},reset:function(){this.numberOfCompleteExecutions=0,this.numberOfDependencyFulfillmentAttempts=0,this.persistControlFlowInfo()},persistControlFlowInfo:function(){LocalStoragePersister.persistNodeControlFlowInfo(this.getControlFlowInfo())},getCommand:function(){return null},addModifiers:function(e,t){for(var n=0,i=e.length;i>n;++n)t.push(new h(e[n]))},evaluateExpression:function(e){switch(e.type){case"expr_str":return e.expr_str;case"expr_var":return this.getVariableValue(e.expr_var.variableName);case"expr_arr":return e.expr_arr;case"expr_concat":for(var t="",n=0,i=e.expr_concat.length;i>n;++n)t+=this.evaluateExpression(e.expr_concat[n]);return t;case"expr_obj":for(var t={},n=0,i=e.expr_obj.props.length;i>n;++n){var r=e.expr_obj.props[n];t[this.evaluateExpression(r.key)]=this.evaluateExpression(r.value)}return t;case"expr_dot":var t=this.evaluateExpression(e.expr_dot.source);if(!t)return null;for(var n=0,i=e.expr_dot.keys.length;i>n;++n){var s=e.expr_dot.keys[n];t=t[s]}return t;default:return e}},getVariableValue:function(e){return this._getVariableValue(this,e)},_getVariableValue:function(e,t){if(!e)return null;var n=e.checkIterationVariable(t);if(n)return n;if(e.variables)for(var i=0,r=e.variables.length;r>i;++i)if(e.variables[i].key==t){var s=e.variables[i].value;return"string"==typeof s?s:this.evaluateExpression(s)}var o=this._getVariableValue(e.parent,t);return o?this.evaluateExpression(o):null},checkIterationVariable:function(e){return null},getAfterDelay:function(){for(var e=0,t=this.modifiers.length;t>e;++e)if("afterSeconds"==this.modifiers[e].type)return 1e3*this.modifiers[e].operands[0];return 1e3},getControlFlowInfo:function(){return{nodeId:this.nodeId,nodeInfo:{numberOfDependencyFulfillmentAttempts:this.numberOfDependencyFulfillmentAttempts,numberOfCompleteExecutions:this.numberOfCompleteExecutions}}},getModifiersPretty:function(){var e=this.modifiers.map(function(e){var t=e.operands.map(function(e){return"'"+this.evaluateExpression(e)+"'"},this);return e.type+" "+t.join(", ")},this);return e.join(";")},getSelectors:function(){var e=[];return this.modifiers.forEach(function(t){if("log"!==t.type)if("value"!==t.type)t.operands.forEach(function(t){e.push(this.evaluateExpression(t))},this);else for(var n=0,i=t.operands.length;i>n;n+=2)e.push(this.evaluateExpression(t.operands[n]))},this),e},setControlFlowInfo:function(e){e&&(this.numberOfDependencyFulfillmentAttempts=e.numberOfDependencyFulfillmentAttempts,this.numberOfCompleteExecutions=e.numberOfCompleteExecutions)},getAndSetControlFlowInfo:function(){var e=LocalStoragePersister.getNodeControlFlowInfo(this.nodeId);this.setControlFlowInfo(e)}}),y=function(){return this.resetChildren=function(){for(var e=0;e<this.children.length;++e)this.children[e].reset()},this.addChildren=function(e,t){for(var n=0;n<e.length;++n){var i=this.createChildNode(e[n]);i&&(i.parent=this,t.push(i))}},this.createChildNode=function(e){return u[e.type]?new u[e.type](e[e.type]):null},this.addVariables=function(e,t){e&&(this.variables||(this.variables=[]),t||(t=this.variables),e.forEach(function(e){if("assignment"===e.type){var n=t.filter(function(t){return t.key===e.assignment.variable});1===n.length?n[0].value=e.assignment.value:t.push({key:e.assignment.variable,value:e.assignment.value})}},this))},this}.call(Object.create(m)),g=function(){return this.shouldExecute=function(){return!this.numberOfCompleteExecutions},this.didExecute=function(){++this.numberOfCompleteExecutions,this.parent.childDidExecute(this),this.persistControlFlowInfo()},this}.call(Object.create(m)),v=function(e){this.newId(),this.numberOfDependencyFulfillmentAttempts=0,this.hasEvaluatedConditional=!1,this.conditionalDidEvaluateToTrue=!1,this.comparable=e.comparable,this.children=[],this.ifChildren=[],this.elseChildren=[],this.addChildren(e.then_statements,this.ifChildren),this.addChildren(e.else_statements||[],this.elseChildren),this.variables=[],this.ifVariables=[],this.elseVariables=[],this.addVariables(e.then_statements,this.ifVariables),this.addVariables(e.else_statements,this.elseVariables),this.modifiers=[],e.modifiers&&this.addModifiers(e.modifiers,this.modifiers),this.shouldExecute=function(){return!this.hasEvaluatedConditional},this.getCommand=function(){for(var e=[this.comparable.type],t=0;t<this.comparable[this.comparable.type].operands.length;++t)e.push(this.evaluateExpression(this.comparable[this.comparable.type].operands[t]));for(var n=new r({name:this.comparable.type+" "+JSON.stringify(e)}),t=0;t<e.length;++t)n.withParameter(e[t]);for(var t=0;t<this.modifiers.length;++t)for(var i=0;i<this.modifiers[t].operands.length;++i)n[this.modifiers[t].type](this.evaluateExpression(this.modifiers[t].operands[i]));return n.withCallback(function(e,t,n){var i=new r("if "+e+" "+t);i[e](t,n),this.conditionalDidEvaluateToTrue=i.execute(),this.children=this.conditionalDidEvaluateToTrue?this.ifChildren:this.elseChildren,this.variables=this.conditionalDidEvaluateToTrue?this.ifVariables:this.elseVariables,this.hasEvaluatedConditional=!0}.bind(this)),n.numFulfillAttempts=this.numberOfDependencyFulfillmentAttempts,n},this.reset=function(){v.prototype.reset.call(this),this.hasEvaluatedConditional=!1,this.conditionalDidEvaluateToTrue=!1,this.resetChildren(),this.persistControlFlowInfo()},this.childDidExecute=function(e){e==this.children[this.children.length-1]&&this.parent.childDidExecute(this),this.persistControlFlowInfo()},this.getControlFlowInfo=function(){var e=v.prototype.getControlFlowInfo.call(this);return e.nodeInfo.hasEvaluatedConditional=this.hasEvaluatedConditional,e.nodeInfo.conditionalDidEvaluateToTrue=this.conditionalDidEvaluateToTrue,e},this.setControlFlowInfo=function(e){e&&(v.prototype.setControlFlowInfo.call(this,e),this.hasEvaluatedConditional=e.hasEvaluatedConditional,this.conditionalDidEvaluateToTrue=e.conditionalDidEvaluateToTrue)},this.resetChildren=function(){for(var e=0;e<this.ifChildren.length;++e)this.ifChildren[e].reset();for(var e=0;e<this.elseChildren.length;++e)this.elseChildren[e].reset()},this.getAndSetControlFlowInfo()};v.prototype=y,u["if"]=v;var b=function(e){this.newId(),this.iterator_var_name=e.iterator_var_name,this.iterator_expr=e.iterator_expr,this.numberOfCompleteExecutions=0,this.numberOfDependencyFulfillmentAttempts=0,this.children=[],this.addChildren(e.statement_list,this.children),this.addVariables(e.statement_list),this.reset=function(){this.numberOfCompleteExecutions=0,this.resetChildren(),this.persistControlFlowInfo()},this.childDidExecute=function(e){if(e==this.children[this.children.length-1]){var t=this.evaluateExpression(this.iterator_expr);t&&++this.numberOfCompleteExecutions<t.length?this.resetChildren():this.parent.childDidExecute(this)}this.persistControlFlowInfo()},this.shouldEnterBlock=function(){var e=this.evaluateExpression(this.iterator_expr);return e&&e.length},this.checkIterationVariable=function(e){if(this.iterator_var_name==e){if("expr_var"==this.iterator_expr.type){var t=this._getVariableValue(this.parent,this.iterator_expr.expr_var.variableName);if(!t)return null;if("object"!=typeof t||!t.length)throw new"invalid array for iterator";return t[this.numberOfCompleteExecutions]}if("expr_arr"==this.iterator_expr.type)return this.iterator_expr.expr_arr[this.numberOfCompleteExecutions];if("expr_dot"==this.iterator_expr.type){var t=this._getVariableValue(this.parent,this.iterator_expr.expr_dot.source.expr_var.variableName);if(!t)return console.log("attempting to access undefined property "+e),null;for(var n=0,i=this.iterator_expr.expr_dot.keys.length;i>n;++n){var r=this.iterator_expr.expr_dot.keys[n],s=!1;if(!t[r]&&t.type&&t[t.type].props){for(var o=0,a=t[t.type].props.length;a>o;++o)t.type&&t[t.type].props[o].key.expr_str===r&&(t=t[t.type].props[o].value,s=!0);if(!s)return console.log('attempting to access undefined property "'+r+'" for iterator variable "'+e+'"'),null;s=!1}else t=t[r]}return"expr_arr"===t.type&&(t=this.evaluateExpression(t)),this.evaluateExpression(t[this.numberOfCompleteExecutions])}throw"invalid iterable"}},this.getAndSetControlFlowInfo()};b.prototype=y,u.each=b;var w=function(e){this.newId(),this.title=this.evaluateExpression(e.command),this.numberOfDependencyFulfillmentAttempts=0,this.numberOfCompleteExecutions=0,this.variables=[],this.modifiers=[],this.addModifiers(e.modifiers,this.modifiers),this.shouldExecute=function(){for(var e=0,t=this.modifiers.length;t>e;++e)if("repeat"===this.modifiers[e].type)return this.numberOfCompleteExecutions-this.evaluateExpression(this.modifiers[e].operands[0])-1;return!this.numberOfCompleteExecutions},this.getCommand=function(){for(var e=new r({name:this.title}),t=0;t<this.modifiers.length;++t)switch(this.modifiers[t].type){case"value":if(2!=this.modifiers[t].operands.length)throw"invalid assignment, 2 operands required, not "+this.modifiers[t].operands.length;for(var n=[],i=0;i<this.modifiers[t].operands.length;++i){var s=this.evaluateExpression(this.modifiers[t].operands[i]);n.push(s)}e.value.apply(e,n);break;case"autocomplete":if(3!=this.modifiers[t].operands.length)throw"invalid autocomplete, 3 operands required, not "+this.modifiers[t].operands.length;for(var n=[],i=0;i<this.modifiers[t].operands.length;++i){var s=this.evaluateExpression(this.modifiers[t].operands[i]);n.push(s)}e.autocomplete.apply(e,n);break;case"goto":if(this.modifiers[t].operands.length>1)throw"invalid goto statement, 1 operand required, not "+this.modifiers[t].operands.length;e["goto"].call(e,this.evaluateExpression(this.modifiers[t].operands[0]));break;case"repeat":if(this.modifiers[t].operands.length>1)throw"invalid repeat statement, 1 operand required, not "+this.modifiers[t].operands.length;break;default:for(var i=0;i<this.modifiers[t].operands.length;++i){var s=this.evaluateExpression(this.modifiers[t].operands[i]);e[this.modifiers[t].type](s)}}return e.numFulfillAttempts=this.numberOfDependencyFulfillmentAttempts,e},this.didExecute=function(){++this.numberOfCompleteExecutions,this.parent.childDidExecute(this),this.persistControlFlowInfo()},this.getAndSetControlFlowInfo()};w.prototype=m,u.command=w;var E=function(e){this.newId(),this.type="checkpoint",this.checkpointInfo=e,this.getCheckpointDescription=function(){return this.evaluateExpression(this.checkpointInfo)},this.getAndSetControlFlowInfo()};E.prototype=g,u.checkpoint=E;var _=function(e){this.newId(),this.type="assert",this.assertInfo=e,this.getModifiersPretty=function(){var e=this.getAssertionResult();return e.description},this.getAssertionResult=function(){var e=this.assertInfo.comparable[this.assertInfo.comparable.type].operands.map(function(e){return this.evaluateExpression(e)},this),t=this.assertInfo.comparable.type+" "+e.map(function(e){return"'"+e+"'"}).join(", "),n=new r({name:"asserting "+t});return n[this.assertInfo.comparable.type].apply(n,e),{result:n.execute(),type:this.assertInfo.comparable.type,description:t}},this.getAndSetControlFlowInfo()};_.prototype=g,u.assert=_;var x=function(e){this.newId(),this.modifiers=[],this.addModifiers(e.options,this.modifiers),this.children=[],this.addChildren(e.statement_list,this.children),this.addVariables(e.statement_list),this.numberOfCompleteExecutions=1,this.reset=function(){}};x.prototype=y;var k=function(e){this.newId(),this.numberOfDependencyFulfillmentAttempts=0,this.inputs=e.inputs,this.children=[],this.addChildren(e.parsed.flytrap.statement_list,this.children),this.addVariables=function(e){k.prototype.addVariables.call(this,e),this.inputs&&this.inputs.forEach(function(e){for(var t=0,n=this.variables.length;n>t;++t)if(this.variables[t].key===e.variable){this.variables[t].value.expr_str=e.value.expr_str;break}},this)},this.addVariables(e.parsed.flytrap.statement_list),this.numberOfCompleteExecutions=1,this.reset=function(){}};k.prototype=y,u.module=k;var C={buildTree:function(e){return new x(e.flytrap)},parse:function(e){var t=this.stripComments(e);return f.parse(t)},stripComments:function(e){if(!e||!e.length||"string"!=typeof e)return"";for(var t=new Array(e.length),n=!1,i=!1,r=!1,s=0,o=e.length;o>s;++s)r||n||i||"'"!==e[s]||"'"===e[s+1]?r&&"'"===e[s]&&"'"!==e[s+1]?(r=!1,t[s]=e[s]):r||n||i||"/"!==e[s]||"/"!==e[s+1]?r||n||i||"/"!==e[s]||"*"!==e[s+1]?!n||"\n"!==e[s]&&"\r"!==e[s]?i&&"*"===e[s]&&e.length-1>s&&"/"===e[s+1]?(i=!1,t[s]=t[s+1]="",++s):n||i?t[s]="":t[s]=e[s]:(n=!1,t[s]=e[s]):(i=!0,t[s]=t[s+1]="",++s):(n=!0,t[s]=t[s+1]="",++s):(r=!0,t[s]=e[s]);return t.join("")},attachModules:function(e,t){this.attachParsedRepresentationsToModules(e.flytrap),t(e)},attachParsedRepresentationsToModules:function(e){this._attachParsedRepresentationsToModules(e.statement_list)},_attachParsedRepresentationsToModules:function(e){if(e&&e.length)for(var t=0,n=e.length;n>t;++t){var i=e[t];if("module"===i.type){var r=i.module.name.expr_str,s=document.getElementById("_flytrap_module_"+r);if(!s||!s.innerText)return void console.log("Referenced module "+r+' must have a <script id ="_flytrap_module_'+r+'"> tag containing its automation script.');i.module.parsed=f.parse(s.innerText)}this._attachParsedRepresentationsToModules(i.module?i.module.parsed.flytrap.statement_list:i.statement_list)}}},S={workflowDictionary:{}};S.startWorkflow=function(e){S.workflowDictionary[e].go()},S.startOrResumeWorkflow=function(e,t){new c({name:e,code:t}).go()},S.registerWorkflow=function(e){S.workflowDictionary[e.name]=e},"function"==typeof define?define(function(){return c}):this.Flytrap=c}).call("undefined"!=typeof module?module.exports||this.window:this.window),!function(e){function t(e,t,n,i){var r,s,o,a,l,c,h,d=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!i&&((t?t.ownerDocument||t:q)!==F&&N(t),t=t||F,P)){if(11!==f&&(l=ge.exec(e)))if(r=l[1]){if(9===f){if(!(o=t.getElementById(r)))return n;if(o.id===r)return n.push(o),n}else if(d&&(o=d.getElementById(r))&&M(t,o)&&o.id===r)return n.push(o),n}else{if(l[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&E.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(r)),n}if(!(!E.qsa||G[e+" "]||L&&L.test(e))){if(1!==f)d=t,h=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(be,"\\$&"):t.setAttribute("id",a=B),c=C(e),s=c.length;s--;)c[s]="[id='"+a+"'] "+p(c[s]);h=c.join(","),d=ve.test(e)&&u(t.parentNode)||t}if(h)try{return Q.apply(n,d.querySelectorAll(h)),n}catch(m){}finally{a===B&&t.removeAttribute("id")}}}return I(e.replace(ae,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>_.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[B]=!0,e}function r(e){var t=F.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var n=e.split("|"),i=e.length;i--;)_.attrHandle[n[i]]=t}function o(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||W)-(~e.sourceIndex||W);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var r,s=e([],n.length,t),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))})})}function u(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function h(){}function p(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function d(e,t,n){var i=t.dir,r=n&&"parentNode"===i,s=H++;return t.first?function(t,n,s){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,s)}:function(t,n,o){var a,l,c,u=[V,s];if(o){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,o))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(c=t[B]||(t[B]={}),l=c[t.uniqueID]||(c[t.uniqueID]={}),(a=l[i])&&a[0]===V&&a[1]===s)return u[2]=a[2];if(l[i]=u,u[2]=e(t,n,o))return!0}}}function f(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,s=n.length;s>r;r++)t(e,n[r],i);return i}function y(e,t,n,i,r){for(var s,o=[],a=0,l=e.length,c=null!=t;l>a;a++)(s=e[a])&&(!n||n(s,i,r))&&(o.push(s),c&&t.push(a));return o}function g(e,t,n,r,s,o){return r&&!r[B]&&(r=g(r)),s&&!s[B]&&(s=g(s,o)),i(function(i,o,a,l){var c,u,h,p=[],d=[],f=o.length,g=i||m(t||"*",a.nodeType?[a]:a,[]),v=!e||!i&&t?g:y(g,p,e,a,l),b=n?s||(i?e:f||r)?[]:o:v;if(n&&n(v,b,a,l),r)for(c=y(b,d),r(c,[],a,l),u=c.length;u--;)(h=c[u])&&(b[d[u]]=!(v[d[u]]=h));if(i){if(s||e){if(s){for(c=[],u=b.length;u--;)(h=b[u])&&c.push(v[u]=h);s(null,b=[],c,l)}for(u=b.length;u--;)(h=b[u])&&(c=s?ee(i,h):p[u])>-1&&(i[c]=!(o[c]=h))}}else b=y(b===o?b.splice(f,b.length):b),s?s(null,o,b,l):Q.apply(o,b)})}function v(e){for(var t,n,i,r=e.length,s=_.relative[e[0].type],o=s||_.relative[" "],a=s?1:0,l=d(function(e){return e===t},o,!0),c=d(function(e){return ee(t,e)>-1},o,!0),u=[function(e,n,i){var r=!s&&(i||n!==D)||((t=n).nodeType?l(e,n,i):c(e,n,i));return t=null,r}];r>a;a++)if(n=_.relative[e[a].type])u=[d(f(u),n)];else{if(n=_.filter[e[a].type].apply(null,e[a].matches),n[B]){for(i=++a;r>i&&!_.relative[e[i].type];i++);return g(a>1&&f(u),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),n,i>a&&v(e.slice(a,i)),r>i&&v(e=e.slice(i)),r>i&&p(e))}u.push(n)}return f(u)}function b(e,n){var r=n.length>0,s=e.length>0,o=function(i,o,a,l,c){var u,h,p,d=0,f="0",m=i&&[],g=[],v=D,b=i||s&&_.find.TAG("*",c),w=V+=null==v?1:Math.random()||.1,E=b.length;for(c&&(D=o===F||o||c);f!==E&&null!=(u=b[f]);f++){if(s&&u){for(h=0,o||u.ownerDocument===F||(N(u),a=!P);p=e[h++];)if(p(u,o||F,a)){l.push(u);break}c&&(V=w)}r&&((u=!p&&u)&&d--,i&&m.push(u))}if(d+=f,r&&f!==d){for(h=0;p=n[h++];)p(m,g,o,a);if(i){if(d>0)for(;f--;)m[f]||g[f]||(g[f]=J.call(l));g=y(g)}Q.apply(l,g),c&&!i&&g.length>0&&d+n.length>1&&t.uniqueSort(l)}return c&&(V=w,D=v),m};return r?i(o):o}var w,E,_,x,k,C,S,I,D,T,A,N,F,O,P,L,R,$,M,B="sizzle"+1*new Date,q=e.document,V=0,H=0,j=n(),z=n(),G=n(),U=function(e,t){return e===t&&(A=!0),0},W=1<<31,K={}.hasOwnProperty,Y=[],J=Y.pop,X=Y.push,Q=Y.push,Z=Y.slice,ee=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",se=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",oe=new RegExp(ne+"+","g"),ae=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ue=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),he=new RegExp(se),pe=new RegExp("^"+ie+"$"),de={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ye=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Ee=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},_e=function(){N()};try{Q.apply(Y=Z.call(q.childNodes),q.childNodes),Y[q.childNodes.length].nodeType}catch(xe){Q={apply:Y.length?function(e,t){X.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}E=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},N=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:q;return i!==F&&9===i.nodeType&&i.documentElement?(F=i,O=F.documentElement,P=!k(F),F.documentMode&&(n=F.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",_e,!1):n.attachEvent&&n.attachEvent("onunload",_e)),E.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),E.getElementsByTagName=r(function(e){return e.appendChild(F.createComment("")),!e.getElementsByTagName("*").length}),E.getElementsByClassName=ye.test(F.getElementsByClassName),E.getById=r(function(e){return O.appendChild(e).id=B,!F.getElementsByName||!F.getElementsByName(B).length}),E.getById?(_.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&P){var n=t.getElementById(e);return n?[n]:[]}},_.filter.ID=function(e){var t=e.replace(we,Ee);return function(e){return e.getAttribute("id")===t}}):(delete _.find.ID,_.filter.ID=function(e){var t=e.replace(we,Ee);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),_.find.TAG=E.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):E.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},_.find.CLASS=E.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&P?t.getElementsByClassName(e):void 0},R=[],L=[],(E.qsa=ye.test(F.querySelectorAll))&&(r(function(e){O.appendChild(e).innerHTML="<a id='"+B+"'></a><select id='"+B+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||L.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+B+"-]").length||L.push("~="),e.querySelectorAll(":checked").length||L.push(":checked"),e.querySelectorAll("a#"+B+"+*").length||L.push(".#.+[+~]")}),r(function(e){var t=F.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&L.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),L.push(",.*:")})),(E.matchesSelector=ye.test($=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(e){E.disconnectedMatch=$.call(e,"div"),$.call(e,"[s!='']:x"),R.push("!=",se)}),L=L.length&&new RegExp(L.join("|")),R=R.length&&new RegExp(R.join("|")),t=ye.test(O.compareDocumentPosition),M=t||ye.test(O.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!E.sortDetached&&t.compareDocumentPosition(e)===n?e===F||e.ownerDocument===q&&M(q,e)?-1:t===F||t.ownerDocument===q&&M(q,t)?1:T?ee(T,e)-ee(T,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,i=0,r=e.parentNode,s=t.parentNode,a=[e],l=[t];if(!r||!s)return e===F?-1:t===F?1:r?-1:s?1:T?ee(T,e)-ee(T,t):0;if(r===s)return o(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;a[i]===l[i];)i++;return i?o(a[i],l[i]):a[i]===q?-1:l[i]===q?1:0},F):F},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==F&&N(e),n=n.replace(ue,"='$1']"),!(!E.matchesSelector||!P||G[n+" "]||R&&R.test(n)||L&&L.test(n)))try{var i=$.call(e,n);if(i||E.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,F,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==F&&N(e),M(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==F&&N(e);var n=_.attrHandle[t.toLowerCase()],i=n&&K.call(_.attrHandle,t.toLowerCase())?n(e,t,!P):void 0;return void 0!==i?i:E.attributes||!P?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(A=!E.detectDuplicates,T=!E.sortStable&&e.slice(0),e.sort(U),A){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return T=null,e},x=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=x(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=x(t);return n},_=t.selectors={cacheLength:50,createPseudo:i,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Ee),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&he.test(n)&&(t=C(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=j[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&j(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var s=t.attr(r,e);return null==s?"!="===n:n?(s+="","="===n?s===i:"!="===n?s!==i:"^="===n?i&&0===s.indexOf(i):"*="===n?i&&s.indexOf(i)>-1:"$="===n?i&&s.slice(-i.length)===i:"~="===n?(" "+s.replace(oe," ")+" ").indexOf(i)>-1:"|="===n?s===i||s.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,h,p,d,f,m=s!==o?"nextSibling":"previousSibling",y=t.parentNode,g=a&&t.nodeName.toLowerCase(),v=!l&&!a,b=!1;if(y){if(s){for(;m;){for(p=t;p=p[m];)if(a?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?y.firstChild:y.lastChild],o&&v){for(p=y,h=p[B]||(p[B]={}),u=h[p.uniqueID]||(h[p.uniqueID]={}),c=u[e]||[],d=c[0]===V&&c[1],b=d&&c[2],p=d&&y.childNodes[d];p=++d&&p&&p[m]||(b=d=0)||f.pop();)if(1===p.nodeType&&++b&&p===t){u[e]=[V,d,b];break}}else if(v&&(p=t,h=p[B]||(p[B]={}),u=h[p.uniqueID]||(h[p.uniqueID]={}),c=u[e]||[],d=c[0]===V&&c[1],b=d),b===!1)for(;(p=++d&&p&&p[m]||(b=d=0)||f.pop())&&((a?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++b||(v&&(h=p[B]||(p[B]={}),u=h[p.uniqueID]||(h[p.uniqueID]={}),u[e]=[V,b]),p!==t)););return b-=r,b===i||b%i===0&&b/i>=0}}},PSEUDO:function(e,n){var r,s=_.pseudos[e]||_.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[B]?s(n):s.length>1?(r=[e,e,"",n],_.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=s(e,n),o=r.length;o--;)i=ee(e,r[o]),e[i]=!(t[i]=r[o])}):function(e){return s(e,0,r)}):s}},pseudos:{not:i(function(e){var t=[],n=[],r=S(e.replace(ae,"$1"));return r[B]?i(function(e,t,n,i){for(var s,o=r(e,null,i,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(we,Ee),function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),lang:i(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Ee).toLowerCase(),function(t){var n;do if(n=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected;
},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},_.pseudos.nth=_.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[w]=a(w);for(w in{submit:!0,reset:!0})_.pseudos[w]=l(w);h.prototype=_.filters=_.pseudos,_.setFilters=new h,C=t.tokenize=function(e,n){var i,r,s,o,a,l,c,u=z[e+" "];if(u)return n?0:u.slice(0);for(a=e,l=[],c=_.preFilter;a;){(!i||(r=le.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),i=!1,(r=ce.exec(a))&&(i=r.shift(),s.push({value:i,type:r[0].replace(ae," ")}),a=a.slice(i.length));for(o in _.filter)!(r=de[o].exec(a))||c[o]&&!(r=c[o](r))||(i=r.shift(),s.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):z(e,l).slice(0)},S=t.compile=function(e,t){var n,i=[],r=[],s=G[e+" "];if(!s){for(t||(t=C(e)),n=t.length;n--;)s=v(t[n]),s[B]?i.push(s):r.push(s);s=G(e,b(r,i)),s.selector=e}return s},I=t.select=function(e,t,n,i){var r,s,o,a,l,c="function"==typeof e&&e,h=!i&&C(e=c.selector||e);if(n=n||[],1===h.length){if(s=h[0]=h[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&E.getById&&9===t.nodeType&&P&&_.relative[s[1].type]){if(t=(_.find.ID(o.matches[0].replace(we,Ee),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(r=de.needsContext.test(e)?0:s.length;r--&&(o=s[r],!_.relative[a=o.type]);)if((l=_.find[a])&&(i=l(o.matches[0].replace(we,Ee),ve.test(s[0].type)&&u(t.parentNode)||t))){if(s.splice(r,1),e=i.length&&p(s),!e)return Q.apply(n,i),n;break}}return(c||S(e,h))(i,t,!P,n,!t||ve.test(e)&&u(t.parentNode)||t),n},E.sortStable=B.split("").sort(U).join("")===B,E.detectDuplicates=!!A,N(),E.sortDetached=r(function(e){return 1&e.compareDocumentPosition(F.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),E.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||s(te,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),"function"==typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module&&module.exports?module.exports=t:e.Sizzle=t}(window),function(){function e(){return sessionStorage.getItem(n)?!0:!1}var t="_flytrap_",n=t+"workflowInProgress";this.loadedSizzle=!1,this.loadedFlytrap=!1,this.attempts=0,this.receive=function(e){if(e.origin===this.allowOrigin){var i=JSON.parse(e.data);if(i&&"run"===i.type)if(i.purge)for(var r in sessionStorage)sessionStorage.hasOwnProperty(r)&&0===r.indexOf(t)&&sessionStorage.removeItem(r);else{if(i.startaturl)return sessionStorage.setItem(n,"1"),void(window.location.href=i.startaturl);if(i.modules){var s;if(i.modules.forEach(function(e){var t=document.getElementById("_flytrap_module_"+e.name);if(t)return s=e.name;t=document.createElement("script"),t.type="template/taskyscript",t.id="_flytrap_module_"+e.name;var n=document.createTextNode(e.script);t.appendChild(n),document.body.appendChild(t)}),s)return console.error("infinite loop detected"),void this.signal({type:"exception",message:"cycle detected with entry point: "+s})}new Flytrap({name:"test",code:i.code,workflowDidComplete:function(e){sessionStorage.removeItem(n),this.signal({type:"complete",data:e})}.bind(this),assertionDidComplete:function(e){this.signal({type:"assert",data:e})}.bind(this),commandDidComplete:function(e){this.signal({type:"did",data:e})}.bind(this),commandMayExecute:function(e){this.signal({type:"next",data:e})}.bind(this)}).go(),sessionStorage.setItem(n,"1")}}},this.signal=function(e){if(this.window.parent!==this.window){var t="string"==typeof e?e:JSON.stringify(e);this.window.parent.postMessage(t,this.allowOrigin)}},this.listen=function(){this.window.addEventListener("message",this.receive.bind(this),!1)},this.bootstrap=function(t){if("undefined"==typeof Flytrap)throw"Please load Flytrap";this.signal({type:e()?"continue":"ready"}),this.listen()}}.call(FlytrapHook.prototype),function(e){if(this.window!==this.window.parent){var t=new FlytrapHook(this.window,e);t.bootstrap()}}("http://flytrap.dev:3000");}).call(window)
